<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Manipulation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="manipulation-page">
        <form id="convertToJpgForm" class="manipulation-form">
            <input type="file" id="imageInput" class="input-field" accept="image/png">
            <button type="button" id="convertButton" class="action-button">Convert to JPG</button>
            <!-- New Download Button -->
            <button type="button" id="downloadJpgBtn" style="display:none;">Download JPG</button>
        </form>
    </div>
    <script src="js/manipulation.js"></script>
    <script src="download_image.js"></script>
    <script>
        document.getElementById('convertButton').addEventListener('click', function() {
            var file = document.getElementById('imageInput').files[0];
            convertImageToJPG(file).then(() => {
                alert('Image has been converted to JPG format.');
                // Show the download button
                document.getElementById('downloadJpgBtn').style.display = 'block';
                document.getElementById('downloadJpgBtn').addEventListener('click', downloadConvertedJPG);
            }).catch(error => {
                alert('An error occurred during the conversion process.');
                console.error(error);
            });
        });

        function convertImageToJPG(file) {
            // Example conversion logic (details would depend on the actual implementation)
            return new Promise((resolve, reject) => {
                if(file.type === "image/png") {
                    // Convert to JPG logic goes here
                    resolve('Conversion to JPG successful');
                } else {
                    reject(new Error('File must be a PNG image.'));
                }
            });
        }
    </script>
</body>
</html>