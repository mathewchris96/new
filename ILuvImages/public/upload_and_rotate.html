<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload and Rotate Image</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <input type="file" id="imageUpload" accept="image/*" onchange="uploadImage()">
  <button id="rotateButton" onclick="rotateImage()">Rotate Image</button>
  <img id="displayImage" src="" alt="Uploaded Image">
  <button id="downloadButton" style="display: none" onclick="downloadImage()">Download Rotated Image</button>

  <script>
    function uploadImage() {
      const input = document.getElementById('imageUpload');
      const reader = new FileReader();
      reader.onload = function(e) {
        const displayImage = document.getElementById('displayImage');
        displayImage.src = e.target.result;
      };
      reader.readAsDataURL(input.files[0]);
    }

    function rotateImage() {
      const displayImage = document.getElementById('displayThisImage');
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');

      const img = new Image();
      img.onload = function() {
        canvas.width = img.height;
        canvas.height = img.width;
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.rotate(90 * Math.PI / 180);
        ctx.drawImage(img, -img.width / 2, -img.height / 2);

        const dataURL = canvas.toDataURL();
        document.getElementById('displayImage').src = dataURL;
        document.getElementById('downloadButton').style.display = 'block';
      };
      img.src = document.getElementById('displayImage').src;
    }

    function downloadImage() {
      const displayImage = document.getElementById('displayImage');
      const a = document.createElement('a');
      a.href = displayImage.src;
      a.download = 'rotated-image.png';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
  </script>
</body>
</html>